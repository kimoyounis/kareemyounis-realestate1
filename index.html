<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Eng. Kareem Younis — Real Estate</title>

  <!-- Font & icons -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700;800&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <style>
    :root{
      --gold-1: #c79b2b;
      --gold-2: #f0c85b;
      --bg-dark-1: #040404;
      --bg-dark-2: #0c0604;
      --card: rgba(255,255,255,0.025);
      --text: #efe9dc;
      --muted: #b9ac99;
      --glass: rgba(255,255,255,0.03);
      --shadow: rgba(0,0,0,0.6);
      --transition: 420ms cubic-bezier(.2,.9,.2,1);
      --max-width: 1200px;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;background:var(--bg-dark-1);color:var(--text);-webkit-font-smoothing:antialiased}
    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}

    /* Animated luxurious black-gold background (slow, elegant) */
    body::before{
      content:"";position:fixed;inset:0;z-index:-2;
      background:linear-gradient(120deg,var(--bg-dark-1) 0%, rgba(199,155,43,0.04) 25%, rgba(199,155,43,0.10) 40%, var(--bg-dark-2) 60%, rgba(199,155,43,0.06) 80%);
      background-size:300% 300%;
      animation:bgShift 18s ease-in-out infinite;
      filter:blur(18px) saturate(110%);
      transform:translateZ(0);
    }
    @keyframes bgShift{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    /* subtle vignette */
    body::after{content:"";position:fixed;inset:0;z-index:-1;background:radial-gradient(ellipse at center, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0.6) 70%);pointer-events:none}

    /* header */
    header{position:fixed;top:0;left:0;right:0;height:76px;display:flex;align-items:center;justify-content:space-between;padding:0 20px;z-index:999;backdrop-filter: blur(6px);border-bottom:1px solid rgba(255,255,255,0.02)}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{font-weight:800;font-size:18px;letter-spacing:.6px}
    nav ul{display:flex;gap:10px;list-style:none;margin:0;padding:0;align-items:center}
    nav a{color:var(--text);padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer;border:1px solid transparent}
    nav a.active{background:linear-gradient(90deg, rgba(199,155,43,0.12), rgba(240,200,91,0.04)); color:var(--gold-2); border-color: rgba(199,155,43,0.06)}
    .controls{display:flex;gap:10px;align-items:center}
    .btn-inline{padding:8px 12px;border-radius:10px;border:1px solid var(--glass);background:transparent;color:var(--text);cursor:pointer;font-weight:700}
    .btn-inline:hover{background:linear-gradient(90deg, rgba(199,155,43,0.06), rgba(240,200,91,0.03)); color:var(--gold-2)}
    /* transparent button with gold border */
    .btn-ghost{background:transparent;border:1px solid var(--gold-1);color:var(--text);padding:8px 12px;border-radius:10px;font-weight:800;cursor:pointer;transition:all .25s}
    .btn-ghost:hover{background:linear-gradient(90deg,var(--gold-1),var(--gold-2));color:#081018;transform:translateY(-2px);box-shadow:0 10px 30px rgba(199,155,43,0.12)}
    .btn-primary{padding:10px 14px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--gold-1),var(--gold-2));color:#081018;font-weight:800;cursor:pointer;box-shadow:0 10px 30px rgba(199,155,43,0.12)}
    .avatar-small{width:46px;height:46px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,0.04);box-shadow:0 8px 30px var(--shadow)}
    .avatar-small img{width:100%;height:100%;object-fit:cover}

    main{padding-top:104px;max-width:var(--max-width);margin:0 auto}

    /* pages styling + controlled transitions */
    section.page{min-height:72vh;padding:36px 20px;margin-bottom:28px;display:none;opacity:0;transform:translateY(14px) scale(.995);transition:opacity var(--transition),transform var(--transition)}
    section.page.active{display:block;opacity:1;transform:none}

    /* hero */
    .hero{display:flex;align-items:center;justify-content:center;padding:28px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 20px 60px rgba(0,0,0,0.6)}
    .hero-card{width:100%;max-width:1100px;display:flex;gap:26px;align-items:center;justify-content:center;flex-wrap:wrap;padding:28px;border-radius:12px}
    .profile-large{width:220px;height:220px;border-radius:20px;overflow:hidden;border:6px solid rgba(255,255,255,0.04);box-shadow:0 26px 64px var(--shadow);transform:scale(.98);transition:transform .9s var(--transition)}
    .profile-large img{width:100%;height:100%;object-fit:cover;display:block}
    .hero-text{max-width:680px;text-align:center}
    .hero-text h1{margin:0;font-size:36px;letter-spacing:.6px;font-weight:800;opacity:0;transform:translateY(6px);transition:all .9s var(--transition)}
    .hero-text p.lead{margin:10px 0 14px;color:var(--muted)}

    /* card and grids */
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 10px 36px var(--shadow)}
    h2{margin:0 0 12px;font-size:22px;color:var(--text)}
    p{color:var(--muted)}

    .about-grid{display:grid;grid-template-columns:1fr 380px;gap:20px}
    .about-grid img{width:100%;border-radius:12px}

    .props-controls{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .filters{display:flex;gap:8px}
    .filters button{padding:8px 12px;border-radius:8px;border:1px solid var(--glass);background:transparent;cursor:pointer;font-weight:700;color:var(--text)}
    .filters button.active{background:var(--gold-1);color:#081018;border-color:var(--gold-1)}
    .search input{padding:10px 12px;border-radius:10px;border:1px solid var(--glass);min-width:220px;background:transparent;color:var(--text)}

    .grid{display:grid;grid-template-columns: repeat(auto-fill,minmax(260px,1fr));gap:18px;margin-top:18px}
    .prop{border-radius:12px;overflow:hidden;background:var(--card);display:flex;flex-direction:column;transition:transform .25s}
    .prop:hover{transform:translateY(-6px)}
    .prop img{width:100%;height:160px;object-fit:cover}
    .meta{padding:12px;display:flex;flex-direction:column;gap:8px}
    .price{color:var(--gold-1);font-weight:900}

    .services-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
    .service{padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));text-align:left;border:1px solid rgba(255,255,255,0.02)}
    .service i{font-size:20px;color:var(--gold-1);margin-left:8px}
    .service-inline{margin-top:14px;padding:12px;border-radius:10px;border:1px dashed var(--glass);background:transparent}

    /* modals */
    .modal-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:1500}
    .modal{width:92%;max-width:920px;background:var(--card);border-radius:12px;display:flex;overflow:hidden}
    .modal .left{width:50%}
    .modal img{width:100%;height:100%;object-fit:cover}
    .modal .right{padding:18px;width:50%}
    .close-modal{position:absolute;right:18px;top:18px;border:none;background:transparent;color:var(--text);padding:8px;border-radius:8px;cursor:pointer}

    /* signup/login */
    .signup-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:1600}
    .signup{width:420px;background:var(--card);padding:18px;border-radius:12px;box-shadow:0 12px 40px var(--shadow)}
    .signup input{width:100%;padding:10px;border-radius:8px;border:1px solid var(--glass);margin-bottom:10px;background:transparent;color:var(--text)}

    footer{padding:22px 20px;text-align:center;color:var(--muted)}

    /* responsiveness */
    @media (max-width:980px){
      .about-grid{grid-template-columns:1fr}
      .profile-large{width:140px;height:140px;border-radius:14px}
      .hero-text h1{font-size:24px}
      nav ul{display:none} /* mobile menu can be added */
    }

    [dir="rtl"] .hero-text{text-align:right}
    [dir="ltr"] .hero-text{text-align:center}
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="brand">
      <div class="logo">Eng. Kareem Younis</div>
      <nav aria-label="Main navigation">
        <ul id="navList">
          <li><a class="nav-link active" data-target="home">Home</a></li>
          <li><a class="nav-link" data-target="about">About</a></li>
          <li><a class="nav-link" data-target="properties">Properties</a></li>
          <li><a class="nav-link" data-target="services">Services</a></li>
          <li><a class="nav-link" data-target="contact">Contact</a></li>
          <li><a class="nav-link" data-target="register">Register</a></li>
        </ul>
      </nav>
    </div>

    <div class="controls" role="toolbar" aria-label="Header controls">
      <button id="langBtn" class="btn-ghost" title="Toggle language">العربي / EN</button>
      <button id="themeBtn" class="btn-inline" title="Toggle theme"><i class="fas fa-adjust"></i></button>
      <button id="signupBtn" class="btn-inline"><i class="fas fa-user-plus"></i> Sign Up</button>
      <div class="avatar-small" id="avatarSmall" title="Profile"><img src="kareem.jpg" alt="Kareem" onerror="this.style.opacity=.3"></div>
    </div>
  </header>

  <main>
    <!-- HOME -->
    <section id="home" class="page active" aria-label="Home">
      <div class="hero">
        <div class="hero-card card">
          <div class="profile-large" id="heroPhoto"><img src="kareem.jpg" alt="Kareem" onerror="this.style.opacity=.4"></div>
          <div class="hero-text">
            <h1 id="titleMain">Eng. Kareem Younis</h1>
            <p class="lead" id="subtitleMain">This company is owned by Eng. Kareem Younis &amp; Partners</p>

            <div style="margin-top:12px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
              <button id="ctaSign" class="btn-primary">Create Account</button>
              <button id="ctaLogin" class="btn-inline">Login</button>
              <button id="ctaBrochure" class="btn-inline">Download Brochure</button>
            </div>

            <div class="hero-actions" style="margin-top:14px">
              <button class="btn-inline" data-target="properties">View Properties</button>
              <button class="btn-inline" data-target="services">Our Services</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="page" aria-label="About">
      <div class="card">
        <h2>About</h2>
        <div class="about-grid">
          <div>
            <p class="lead" id="aboutIntro">Eng. Kareem Younis is a multidisciplinary entrepreneur — a Computer Engineering graduate (Ain Shams University) with deep expertise in mobile app development (Flutter), cloud services, and property investment strategies.</p>

            <p id="aboutLong">Kareem combined technical knowledge and market experience to build <strong>Kareem Younis Real Estate</strong>. Graduated with honors, he completed multiple professional courses and certifications in software engineering, data analytics, and real estate finance. His achievements include:</p>

            <ul id="achievements">
              <li>Led development of three commercial mobile apps used by thousands of users.</li>
              <li>Certified in advanced mobile development, Python, and cloud services.</li>
              <li>IELTS certified — enabling international partnerships and dual-degree collaboration.</li>
              <li>Advised several property investors to realize high-return portfolios in New Cairo and Maadi.</li>
              <li>Built an internal CRM and listing tool to speed up property matching for clients.</li>
            </ul>

            <p id="aboutWrap">Kareem's philosophy is transparency, data-driven investment, and building long-term relationships with buyers, sellers, and tenants.</p>
          </div>

          <div>
            <img src="kareem.jpg" alt="Kareem portrait" style="border-radius:12px">
            <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
              <button class="btn-inline" data-target="services">Our Services</button>
              <button class="btn-inline" data-target="properties">See Properties</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PROPERTIES -->
    <section id="properties" class="page" aria-label="Properties">
      <div class="card">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
          <h2>Properties</h2>
          <div style="display:flex;gap:12px;align-items:center">
            <div class="filters" role="toolbar" aria-label="filters">
              <button class="active" data-filter="all">All</button>
              <button data-filter="sale">For Sale</button>
              <button data-filter="rent">For Rent</button>
              <button data-filter="commercial">Commercial</button>
            </div>
            <div class="search" style="margin-left:12px">
              <i class="fas fa-search" style="color:var(--muted);margin-left:8px"></i>
              <input id="propSearch" placeholder="Search by title or description..." aria-label="Search properties">
            </div>
          </div>
        </div>

        <div class="grid" id="propsGrid" style="margin-top:18px">
          <div class="prop" data-type="sale" data-title="Luxury Villa - New Cairo" data-price="$450,000" data-desc="5BR villa, private pool, premium finishing">
            <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?auto=format&fit=crop&w=1000&q=60" alt="">
            <div class="meta">
              <div class="row"><h3>Luxury Villa - New Cairo</h3><div class="price">$450,000</div></div>
              <p>5 beds • 4 baths • 500 sqm</p>
              <div class="row">
                <div><button class="btn-inline" onclick="openDetail(this)">Details</button><button class="btn-inline" onclick="contactAgent(this)">Contact</button></div>
                <div><button class="btn-inline" onclick="toggleFav(this)"><i class="far fa-heart"></i></button></div>
              </div>
            </div>
          </div>

          <div class="prop" data-type="rent" data-title="Cozy Studio - Maadi" data-price="$450 / month" data-desc="Furnished studio in Maadi, internet included.">
            <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=1000&q=60" alt="">
            <div class="meta">
              <div class="row"><h3>Cozy Studio - Maadi</h3><div class="price">$450 / month</div></div>
              <p>Studio • 1 bath • 40 sqm</p>
              <div class="row"><div><button class="btn-inline" onclick="openDetail(this)">Details</button><button class="btn-inline" onclick="contactAgent(this)">Contact</button></div><div><button class="btn-inline" onclick="toggleFav(this)"><i class="far fa-heart"></i></button></div></div>
            </div>
          </div>

          <div class="prop" data-type="commercial" data-title="Office Space - Maadi" data-price="$250,000" data-desc="Office space in Maadi, modern design.">
            <img src="https://images.unsplash.com/photo-1580587771525-78b9dba3b914?auto=format&fit=crop&w=1000&q=60" alt="">
            <div class="meta">
              <div class="row"><h3>Office Space - Maadi</h3><div class="price">$250,000</div></div>
              <p>200 sqm • Prime location</p>
              <div class="row"><div><button class="btn-inline" onclick="openDetail(this)">Details</button><button class="btn-inline" onclick="contactAgent(this)">Contact</button></div><div><button class="btn-inline" onclick="toggleFav(this)"><i class="far fa-heart"></i></button></div></div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section id="services" class="page" aria-label="Services">
      <div class="card">
        <h2>Services</h2>
        <div class="services-grid">
          <div class="service">
            <h3>Sell Property <i class="fas fa-hand-holding-usd"></i></h3>
            <p>We help owners sell at the best market price, fast and secure.</p>
            <div style="margin-top:10px;display:flex;gap:8px">
              <button class="btn-inline" onclick="serviceAction('sell','modal')">Open Modal</button>
              <button class="btn-inline" onclick="serviceAction('sell','inline')">Show Inline Form</button>
            </div>
          </div>

          <div class="service">
            <h3>Rent Out <i class="fas fa-key"></i></h3>
            <p>Full rental management and tenant screening services.</p>
            <div style="margin-top:10px;display:flex;gap:8px">
              <button class="btn-inline" onclick="serviceAction('rent','modal')">Open Modal</button>
              <button class="btn-inline" onclick="serviceAction('rent','inline')">Show Inline Form</button>
            </div>
          </div>

          <div class="service">
            <h3>Buy Property <i class="fas fa-home"></i></h3>
            <p>We help buyers find the perfect home or investment.</p>
            <div style="margin-top:10px;display:flex;gap:8px">
              <button class="btn-inline" onclick="serviceAction('buy','modal')">Open Modal</button>
              <button class="btn-inline" onclick="serviceAction('buy','inline')">Show Inline Form</button>
            </div>
          </div>

          <div class="service">
            <h3>Investment Advice <i class="fas fa-chart-line"></i></h3>
            <p>Data-driven guidance for property investment portfolios.</p>
            <div style="margin-top:10px;display:flex;gap:8px">
              <button class="btn-inline" onclick="serviceAction('advice','modal')">Open Modal</button>
              <button class="btn-inline" onclick="serviceAction('advice','inline')">Show Inline Form</button>
            </div>
          </div>
        </div>

        <div id="inlineServiceArea" class="service-inline" style="display:none"></div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="page" aria-label="Contact">
      <div class="card">
        <h2>Contact</h2>
        <div style="display:grid;grid-template-columns:1fr 320px;gap:18px">
          <form id="contactForm" class="form">
            <input id="cname" placeholder="Your name" required>
            <input id="cemail" type="email" placeholder="Your email" required>
            <input id="cphone" placeholder="Phone (optional)">
            <textarea id="cmsg" rows="5" placeholder="Your message" required></textarea>
            <div style="display:flex;gap:8px;align-items:center">
              <button class="btn-primary" type="submit">Send Message</button>
              <button type="button" class="btn-inline" id="clearContact">Clear</button>
            </div>
          </form>

          <div class="card" style="padding:14px">
            <h3>Office</h3>
            <p>Address: Cairo, Egypt</p>
            <p>Phone: 0123456789</p>
            <p>Email: <a href="mailto:kareem@example.com">kareem@example.com</a></p>
            <div style="margin-top:10px;display:flex;gap:8px"><a class="btn-inline" href="#"><i class="fab fa-facebook"></i></a><a class="btn-inline" href="#"><i class="fab fa-instagram"></i></a><a class="btn-inline" href="#"><i class="fab fa-linkedin"></i></a></div>
          </div>
        </div>
      </div>
    </section>

    <!-- REGISTER -->
    <section id="register" class="page" aria-label="Register">
      <div class="card" style="max-width:720px;margin:0 auto">
        <h2>Register / Sign Up</h2>
        <p>Join to save favorites, contact agents faster and get property alerts.</p>
        <div style="display:grid;gap:8px">
          <input id="rName" placeholder="Full name">
          <input id="rEmail" placeholder="Email">
          <input id="rPhone" placeholder="Phone">
          <input id="rPass" type="password" placeholder="Password">
          <div style="display:flex;gap:8px">
            <button class="btn-primary" id="rCreate">Create account</button>
            <button class="btn-inline" onclick="showSection('home')">Back</button>
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer><small>© 2025 Eng. Kareem Younis &amp; Partners</small></footer>

  <!-- GENERIC MODALS -->
  <div id="genericModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal card">
      <button class="close-modal" onclick="closeGenericModal()"><i class="fas fa-times"></i></button>
      <div class="left"><img id="genericModalImg" src="" alt=""></div>
      <div class="right" id="genericModalContent"></div>
    </div>
  </div>

  <div id="serviceModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal card" style="max-width:760px">
      <button class="close-modal" onclick="closeServiceModal()"><i class="fas fa-times"></i></button>
      <div class="right" style="width:100%;padding:20px">
        <h3 id="serviceModalTitle">Service</h3>
        <p id="serviceModalIntro">Please choose your role:</p>
        <div style="display:flex;gap:10px;margin-top:12px">
          <button class="btn" id="svcSeller">I'm the Seller</button>
          <button class="btn" id="svcBuyer">I'm the Buyer</button>
          <button class="btn" id="svcOther" style="background:var(--gold-1);color:#081018">Other / Agent</button>
        </div>
        <div id="svcModalForm" style="margin-top:14px"></div>
      </div>
    </div>
  </div>

  <div id="signupBackdrop" class="signup-backdrop" aria-hidden="true">
    <div class="signup card">
      <h3 id="signupTitle">Create an account</h3>
      <p style="color:var(--muted)" id="signupSub">Sign up to save favorites and contact agents faster.</p>
      <input id="suName" placeholder="Full name">
      <input id="suEmail" placeholder="Email">
      <input id="suPhone" placeholder="Phone">
      <input id="suPass" type="password" placeholder="Password">
      <div style="display:flex;gap:8px;margin-top:8px">
        <button class="btn-primary" id="createAccount">Create account</button>
        <button class="btn-inline" id="closeSignup">Cancel</button>
      </div>
      <hr style="border:none;border-top:1px dashed var(--glass);margin:12px 0">
      <div style="display:flex;gap:8px;justify-content:center">
        <button class="btn-inline" id="openLogin">Already have account? Login</button>
      </div>
    </div>
  </div>

  <div id="loginBackdrop" class="signup-backdrop" aria-hidden="true">
    <div class="signup card">
      <h3 id="loginTitle">Login</h3>
      <input id="liEmail" placeholder="Email">
      <input id="liPass" type="password" placeholder="Password">
      <div style="display:flex;gap:8px;margin-top:8px">
        <button class="btn-primary" id="doLogin">Login</button>
        <button class="btn-inline" id="closeLogin">Cancel</button>
      </div>
    </div>
  </div>

<script>
  /* ----------------- tiny helpers ----------------- */
  const $ = s => document.querySelector(s);
  const $$ = s => Array.from(document.querySelectorAll(s));

  /* ----------------- Navigation (button-only, no wheel) ----------------- */
  const sectionOrder = ['home','about','properties','services','contact','register'];

  function showSection(id){
    if(!id) return;
    const active = document.querySelector('section.page.active');
    if(active && active.id === id) return;

    // Immediately hide previous (avoid overlapping black flashes)
    if(active){
      active.classList.remove('active');
      // hide immediately to prevent stacked visible sections
      active.style.display = 'none';
      active.style.opacity = 0;
    }

    // prepare next
    const next = document.getElementById(id);
    if(!next) return;
    // ensure it's hidden then display block to trigger transition
    next.style.display = 'block';
    // small delay to let browser paint before animating in
    requestAnimationFrame(()=>{
      next.style.opacity = '0';
      next.style.transform = 'translateY(12px) scale(.995)';
      // force reflow
      void next.offsetWidth;
      // then animate to visible
      next.style.transition = `opacity ${getComputedStyle(document.documentElement).getPropertyValue('--transition') || '420ms'} , transform ${getComputedStyle(document.documentElement).getPropertyValue('--transition') || '420ms'}`;
      next.style.opacity = '1';
      next.style.transform = 'translateY(0) scale(1)';
      next.classList.add('active');
    });

    // update nav active state
    $$('.nav-link').forEach(n=> n.classList.toggle('active', n.getAttribute('data-target') === id));
    // avatar visibility
    $('#avatarSmall').style.display = (id === 'home') ? 'none' : 'block';
    // scroll to top
    window.scrollTo({top:0,behavior:'smooth'});
  }

  // wire nav links
  $$('.nav-link').forEach(n=>{
    const t = n.getAttribute('data-target');
    n.addEventListener('click', ()=> showSection(t));
  });
  // wire any button with data-target attribute
  document.addEventListener('click', e=>{
    const btn = e.target.closest('[data-target]');
    if(btn){
      const t = btn.getAttribute('data-target');
      if(t) showSection(t);
    }
  });

  // ensure initial state: only home visible (prevent flashes)
  document.addEventListener('DOMContentLoaded', ()=>{
    $$('.page').forEach(s=>{
      if(!s.classList.contains('active')){
        s.style.display = 'none';
        s.style.opacity = 0;
      } else {
        s.style.display = 'block';
        s.style.opacity = 1;
      }
    });
    // hero small animation
    setTimeout(()=>{
      const h1 = $('#titleMain');
      if(h1){ h1.style.opacity = 1; h1.style.transform = 'translateY(0)'; }
      const pImg = document.querySelector('.profile-large');
      if(pImg) pImg.style.transform = 'scale(1)';
    }, 220);
  });

  /* ----------------- Theme toggle (simple, persistent) ----------------- */
  const themeBtn = $('#themeBtn');
  themeBtn.addEventListener('click', ()=>{
    document.body.classList.toggle('light');
    localStorage.setItem('theme', document.body.classList.contains('light') ? 'light' : 'dark');
  });
  if(localStorage.getItem('theme') === 'light') document.body.classList.add('light');

  /* ----------------- Language toggle (EN <-> AR) ----------------- */
  const langBtn = $('#langBtn');
  let lang = localStorage.getItem('site_lang') || 'en';
  function applyLang(l){
    lang = l; localStorage.setItem('site_lang', l);
    if(l === 'ar'){
      document.documentElement.setAttribute('dir','rtl'); document.body.setAttribute('dir','rtl');
      langBtn.textContent = 'EN / عربي';
      $('#titleMain').textContent = 'المهندس كريم يونس';
      $('#subtitleMain').textContent = 'هذه الشركة مملوكة للمهندس كريم يونس وشركاه';
      $$('.nav-link').forEach((a,i)=> a.textContent = ['الرئيسية','من نحن','العقارات','الخدمات','تواصل','سجل'][i]);
      $('#signupBtn').innerHTML = '<i class="fas fa-user-plus"></i> سجل';
      $('#ctaSign').textContent = 'انشئ حساباً';
      $('#ctaLogin').textContent = 'تسجيل دخول';
      $('#ctaBrochure').textContent = 'تحميل النشرة';
      $('#aboutIntro').textContent = 'المهندس كريم يونس رائد أعمال متعدد التخصصات - خريج كلية الهندسة (جامعة عين شمس) بخبرة في تطوير تطبيقات الهواتف والاستثمار العقاري.';
      $('#aboutLong').innerHTML = 'جمع كريم بين المعرفة التقنية وخبرة السوق لتأسيس <strong>Kareem Younis Real Estate</strong>. حاصل على دورات وشهادات احترافية في هندسة البرمجيات، تحليل البيانات، والتمويل العقاري. من إنجازاته:';
      $('#achievements').innerHTML =
        '<li>قاد تطوير ثلاثة تطبيقات تجارية مستخدمة من آلاف المستخدمين.</li>' +
        '<li>حاصل على شهادات متقدمة في تطوير التطبيقات وPython والخدمات السحابية.</li>' +
        '<li>حاصل على شهادة IELTS — وساهم ذلك في شراكات دولية.</li>' +
        '<li>قدم استشارات أدت لعوائد مرتفعة في التجمع الخامس والمعادي.</li>' +
        '<li>بنى نظام إدارة داخلي لتسريع مطابقة العقارات للعملاء.</li>';
      $('#aboutWrap').textContent = 'فلسفة كريم: الشفافية، اتخاذ قرارات مستندة على البيانات، وبناء علاقات طويلة الأمد مع العملاء.';
    } else {
      document.documentElement.setAttribute('dir','ltr'); document.body.setAttribute('dir','ltr');
      langBtn.textContent = 'العربي / EN';
      $('#titleMain').textContent = 'Eng. Kareem Younis';
      $('#subtitleMain').textContent = 'This company is owned by Eng. Kareem Younis & Partners';
      $$('.nav-link').forEach((a,i)=> a.textContent = ['Home','About','Properties','Services','Contact','Register'][i]);
      $('#signupBtn').innerHTML = '<i class="fas fa-user-plus"></i> Sign Up';
      $('#ctaSign').textContent = 'Create Account';
      $('#ctaLogin').textContent = 'Login';
      $('#ctaBrochure').textContent = 'Download Brochure';
      $('#aboutIntro').textContent = 'Eng. Kareem Younis is a multidisciplinary entrepreneur — a Computer Engineering graduate (Ain Shams University) with deep expertise in mobile app development (Flutter), cloud services, and property investment strategies.';
      $('#aboutLong').innerHTML = 'Kareem combined technical knowledge and market experience to build <strong>Kareem Younis Real Estate</strong>. Graduated with honors, he completed multiple professional courses and certifications in software engineering, data analytics, and real estate finance. His achievements include:';
      $('#achievements').innerHTML =
        '<li>Led development of three commercial mobile apps used by thousands of users.</li>' +
        '<li>Certified in advanced mobile development, Python, and cloud services.</li>' +
        '<li>IELTS certified — enabling international partnerships and dual-degree collaboration.</li>' +
        '<li>Advised several property investors to realize high-return portfolios in New Cairo and Maadi.</li>' +
        '<li>Built an internal CRM and listing tool to speed up property matching for clients.</li>';
      $('#aboutWrap').textContent = "Kareem's philosophy is transparency, data-driven investment, and building long-term relationships with buyers, sellers, and tenants.";
    }
  }
  langBtn.addEventListener('click', ()=> applyLang(lang === 'en' ? 'ar' : 'en'));
  applyLang(lang);

  /* ----------------- Search & Filters ----------------- */
  const filterBtns = $$('.filters button');
  const props = $$('.prop');
  filterBtns.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      filterBtns.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const f = btn.getAttribute('data-filter');
      props.forEach(p=> p.style.display = (f === 'all' || p.dataset.type === f) ? 'flex' : 'none');
    });
  });
  $('#propSearch').addEventListener('input', e=>{
    const q = e.target.value.trim().toLowerCase();
    props.forEach(p=>{
      const title = (p.dataset.title || '').toLowerCase();
      const desc = (p.dataset.desc || '').toLowerCase();
      p.style.display = (!q || title.includes(q) || desc.includes(q)) ? 'flex' : 'none';
    });
  });

  /* ----------------- Property modal ----------------- */
  function openDetail(btn){
    const p = btn.closest('.prop'); if(!p) return;
    $('#genericModalImg').src = p.querySelector('img').src;
    $('#genericModalContent').innerHTML = `<h3>${p.dataset.title}</h3><p>${p.dataset.desc}</p><p style="color:var(--gold-1);font-weight:800">${p.dataset.price}</p><div style="margin-top:10px"><button class="btn-primary" onclick="contactAgentFromModal()">Contact Agent</button></div>`;
    $('#genericModal').style.display = 'flex'; $('#genericModal').setAttribute('aria-hidden','false');
  }
  function closeGenericModal(){ $('#genericModal').style.display='none'; $('#genericModal').setAttribute('aria-hidden','true'); }
  window.openDetail = openDetail; window.closeGenericModal = closeGenericModal;
  $('#genericModal').addEventListener('click', e=>{ if(e.target === $('#genericModal')) closeGenericModal(); });

  function contactAgentFromModal(){ alert(lang === 'ar' ? 'طلب اتصال بالمندوب (تجريبي)' : 'Contact request sent (demo)'); closeGenericModal(); }

  /* ----------------- Favorites demo ----------------- */
  function toggleFav(btn){
    const icon = btn.querySelector('i');
    if(!icon) return;
    if(icon.classList.contains('fas')){ icon.classList.remove('fas'); icon.classList.add('far'); alert(lang==='ar'?'تم الحذف من المفضلة':'Removed from favorites'); }
    else { icon.classList.remove('far'); icon.classList.add('fas'); alert(lang==='ar'?'تم الحفظ في المفضلة':'Saved to favorites'); }
  }
  window.toggleFav = toggleFav;

  /* ----------------- Contact form ----------------- */
  $('#contactForm').addEventListener('submit', e=>{
    e.preventDefault();
    alert(lang === 'ar' ? 'تم ارسال الرسالة! سنتواصل معك قريبا.' : 'Message sent! We will contact you soon.');
    $('#contactForm').reset();
  });
  $('#clearContact').addEventListener('click', ()=> $('#contactForm').reset());

  /* ----------------- Signup / Login (demo) ----------------- */
  $('#signupBtn').addEventListener('click', ()=> { $('#signupBackdrop').style.display='flex'; $('#signupBackdrop').setAttribute('aria-hidden','false'); });
  $('#closeSignup').addEventListener('click', ()=> { $('#signupBackdrop').style.display='none'; $('#signupBackdrop').setAttribute('aria-hidden','true'); });
  $('#createAccount').addEventListener('click', ()=>{
    const name = $('#suName').value.trim(); const email = $('#suEmail').value.trim();
    if(!name || !email){ alert(lang==='ar'?'من فضلك اكمل الحقول':'Please fill required fields'); return; }
    const users = JSON.parse(localStorage.getItem('users_demo')||'[]'); users.push({name,email,phone:$('#suPhone').value||'',created:Date.now()}); localStorage.setItem('users_demo', JSON.stringify(users));
    alert(lang==='ar'?'تم انشاء الحساب (تجريبي)':'Account created (demo)');
    $('#signupBackdrop').style.display = 'none';
  });

  $('#openLogin').addEventListener('click', ()=>{ $('#signupBackdrop').style.display='none'; $('#loginBackdrop').style.display='flex'; });
  $('#closeLogin').addEventListener('click', ()=>{ $('#loginBackdrop').style.display='none'; });
  $('#doLogin').addEventListener('click', ()=>{
    const e = $('#liEmail').value.trim(); const p = $('#liPass').value.trim(); const users = JSON.parse(localStorage.getItem('users_demo')||'[]');
    const found = users.find(u=>u.email===e && (!u.pass || u.pass===p));
    if(found){ alert(lang==='ar'?'تم تسجيل الدخول (تجريبي)':'Logged in (demo)'); $('#loginBackdrop').style.display='none'; } else alert(lang==='ar'?'بيانات خاطئة':'Invalid credentials (demo)');
  });

  $('#ctaSign').addEventListener('click', ()=> $('#signupBackdrop').style.display='flex');
  $('#ctaLogin').addEventListener('click', ()=> $('#loginBackdrop').style.display='flex');
  $('#ctaBrochure').addEventListener('click', ()=> alert(lang==='ar'?'تحميل النشرة غير متوفر الآن (تجريبي)':'Brochure download not available (demo)'));

  /* ----------------- Register page create ----------------- */
  $('#rCreate').addEventListener('click', ()=>{
    const name = $('#rName').value.trim(); const email = $('#rEmail').value.trim(); const pass = $('#rPass').value.trim();
    if(!name||!email||!pass){ alert(lang==='ar'?'اكمل الحقول':'Please fill required fields'); return; }
    const users = JSON.parse(localStorage.getItem('users_demo')||'[]'); users.push({name,email,phone:$('#rPhone').value||'',created:Date.now()}); localStorage.setItem('users_demo', JSON.stringify(users));
    alert(lang==='ar'?'تم انشاء الحساب (تجريبي)':'Account created (demo)'); showSection('home');
  });

  /* ----------------- Services flows (modal & inline) ----------------- */
  function serviceAction(type, mode){
    if(mode === 'modal'){
      $('#serviceModal').style.display='flex'; $('#serviceModal').setAttribute('aria-hidden','false');
      $('#serviceModalTitle').textContent = (lang==='ar'? {sell:'بيع عقار',rent:'تأجير عقار',buy:'شراء عقار',advice:'استشارة'}[type] : {sell:'Sell Property',rent:'Rent Out',buy:'Buy Property',advice:'Investment Advice'}[type]) || 'Service';
      $('#svcModalForm').innerHTML = '';
      $('#svcSeller').onclick = ()=> renderSvcFormModal('seller', type);
      $('#svcBuyer').onclick = ()=> renderSvcFormModal('buyer', type);
      $('#svcOther').onclick = ()=> renderSvcFormModal('other', type);
    } else {
      renderInlineForm(type);
      showSection('services');
      setTimeout(()=> document.getElementById('inlineServiceArea').scrollIntoView({behavior:'smooth', block:'center'}), 300);
    }
  }
  window.serviceAction = serviceAction;

  function renderSvcFormModal(role, type){
    const cont = $('#svcModalForm'); cont.innerHTML = '';
    if(role === 'seller'){
      cont.innerHTML = `<h4>${lang==='ar'?'نموذج بيع':'Sell Property Form'}</h4>
        <input id="m_owner" placeholder="${lang==='ar'?'اسم المالك':'Owner name'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px">
        <input id="m_address" placeholder="${lang==='ar'?'عنوان العقار':'Property address'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px">
        <input id="m_price" placeholder="${lang==='ar'?'السعر المتوقع':'Expected price'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px">
        <textarea id="m_desc" placeholder="${lang==='ar'?'وصف موجز':'Short description'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"></textarea>
        <div style="display:flex;gap:8px"><button class="btn-primary" onclick="submitServiceModal('seller','${type}')">${lang==='ar'?'ارسال':'Submit'}</button><button class="btn-inline" onclick="closeServiceModal()">${lang==='ar'?'الغاء':'Cancel'}</button></div>`;
    } else if(role === 'buyer'){
      cont.innerHTML = `<h4>${lang==='ar'?'نموذج مشتري':'Buyer Request Form'}</h4>
        <input id="m_bname" placeholder="${lang==='ar'?'اسم المشتري':'Buyer name'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px">
        <input id="m_budget" placeholder="${lang==='ar'?'الميزانية التقريبية':'Approx. budget'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px">
        <input id="m_area" placeholder="${lang==='ar'?'المنطقة المفضلة':'Preferred area'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px">
        <textarea id="m_req" placeholder="${lang==='ar'?'متطلبات اضافية':'Additional requirements'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"></textarea>
        <div style="display:flex;gap:8px"><button class="btn-primary" onclick="submitServiceModal('buyer','${type}')">${lang==='ar'?'ارسال':'Submit'}</button><button class="btn-inline" onclick="closeServiceModal()">${lang==='ar'?'الغاء':'Cancel'}</button></div>`;
    } else {
      cont.innerHTML = `<h4>${lang==='ar'?'تواصل معنا':'Contact Us'}</h4>
        <input id="m_name" placeholder="${lang==='ar'?'اسمك':'Your name'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px">
        <input id="m_email" placeholder="${lang==='ار'?'البريد الالكتروني':'Email'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px">
        <textarea id="m_note" placeholder="${lang==='ar'?'ملاحظتك':'Your note'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"></textarea>
        <div style="display:flex;gap:8px"><button class="btn-primary" onclick="submitServiceModal('other','${type}')">${lang==='ar'?'ارسال':'Submit'}</button><button class="btn-inline" onclick="closeServiceModal()">${lang==='ار'?'الغاء':'Cancel'}</button></div>`;
    }
  }

  function submitServiceModal(role,type){
    const requests = JSON.parse(localStorage.getItem('serviceRequests')||'[]'); const now = Date.now();
    let data = {role,type,lang,created:now};
    if(role==='seller'){ data.owner=$('#m_owner').value; data.address=$('#m_address').value; data.price=$('#m_price').value; data.desc=$('#m_desc').value; }
    else if(role==='buyer'){ data.name=$('#m_bname').value; data.budget=$('#m_budget').value; data.area=$('#m_area').value; data.req=$('#m_req').value; }
    else { data.name=$('#m_name').value; data.email=$('#m_email').value; data.note=$('#m_note').value; }
    requests.push(data); localStorage.setItem('serviceRequests', JSON.stringify(requests));
    alert(lang==='ar'?'تم ارسال طلبك! سنتواصل معك قريباً.':'Your request was submitted! We will contact you soon.');
    closeServiceModal();
  }

  function closeServiceModal(){ $('#serviceModal').style.display='none'; $('#serviceModal').setAttribute('aria-hidden','true'); $('#svcModalForm').innerHTML=''; }

  function renderInlineForm(type){
    const area = $('#inlineServiceArea'); area.style.display='block';
    let html = `<strong style="display:block;margin-bottom:8px">${type.toUpperCase()} - ${lang==='ar'?'نموذج سريع':'Quick Form'}</strong>`;
    if(type==='sell'){
      html += `<input id="i_owner" placeholder="${lang==='ar'?'اسم المالك':'Owner name'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><input id="i_addr" placeholder="${lang==='ar'?'عنوان العقار':'Property address'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><input id="i_price" placeholder="${lang==='ار'?'السعر المتوقع':'Expected price'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><div style="display:flex;gap:8px"><button class="btn-primary" onclick="submitInline('seller','sell')">${lang==='ar'?'ارسال':'Submit'}</button><button class="btn-inline" onclick="hideInline()">${lang==='ار'?'الغاء':'Cancel'}</button></div>`;
    } else if(type==='rent'){
      html += `<input id="i_owner_r" placeholder="${lang==='ar'?'اسم المالك':'Owner name'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><input id="i_addr_r" placeholder="${lang==='ar'?'عنوان العقار':'Property address'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><input id="i_rent_price" placeholder="${lang==='ar'?'السعر الشهري':'Monthly rent'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><div style="display:flex;gap:8px"><button class="btn-primary" onclick="submitInline('seller','rent')">${lang==='ar'?'ارسال':'Submit'}</button><button class="btn-inline" onclick="hideInline()">${lang==='ار'?'الغاء':'Cancel'}</button></div>`;
    } else if(type==='buy'){
      html += `<input id="i_bname" placeholder="${lang==='ar'?'اسم المشتري':'Buyer name'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><input id="i_budget" placeholder="${lang==='ار'?'الميزانية التقريبية':'Approx. budget'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><div style="display:flex;gap:8px"><button class="btn-primary" onclick="submitInline('buyer','buy')">${lang==='ار'?'ارسال':'Submit'}</button><button class="btn-inline" onclick="hideInline()">${lang==='ار'?'الغاء':'Cancel'}</button></div>`;
    } else {
      html += `<input id="i_name_o" placeholder="${lang==='ار'?'اسمك':'Your name'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><input id="i_email_o" placeholder="${lang==='ار'?'البريد الالكتروني':'Email'}" style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px"><div style="display:flex;gap:8px"><button class="btn-primary" onclick="submitInline('other','advice')">${lang==='ار'?'ارسال':'Submit'}</button><button class="btn-inline" onclick="hideInline()">${lang==='ار'?'الغاء':'Cancel'}</button></div>`;
    }
    area.innerHTML = html;
  }
  function hideInline(){ $('#inlineServiceArea').style.display='none'; $('#inlineServiceArea').innerHTML=''; }
  function submitInline(role,type){
    const requests = JSON.parse(localStorage.getItem('serviceRequests')||'[]'); let data = {role,type,lang,created:Date.now()};
    if(type==='sell'){ data.owner=$('#i_owner').value; data.address=$('#i_addr').value; data.price=$('#i_price').value; }
    else if(type==='rent'){ data.owner=$('#i_owner_r').value; data.address=$('#i_addr_r').value; data.price=$('#i_rent_price').value; }
    else if(type==='buy'){ data.name=$('#i_bname').value; data.budget=$('#i_budget').value; }
    else { data.name=$('#i_name_o').value; data.email=$('#i_email_o').value; }
    requests.push(data); localStorage.setItem('serviceRequests', JSON.stringify(requests));
    alert(lang==='ar'?'تم ارسال طلبك! سنتواصل معك قريباً.':'Your request was submitted! We will contact you soon.');
    hideInline();
  }

  /* ----------------- Misc helpers ----------------- */
  document.getElementById('avatarSmall').style.display = 'none'; // hide small avatar on home

  // generic backdrop close
  $$('.modal-backdrop').forEach(b=>{
    b.addEventListener('click', e=>{ if(e.target === b){ b.style.display='none'; b.setAttribute('aria-hidden','true'); }});
  });

  function contactAgent(btn){
    const p = btn.closest('.prop'); const title = p ? p.dataset.title : '';
    showSection('contact');
    setTimeout(()=>{ $('#cmsg').value = (lang==='ar' ? 'مرحباً، مهتم بـ: ' : 'Hi, I am interested in: ') + title; }, 420);
  }
  window.contactAgent = contactAgent;

  // close generic modal
  function closeGenericModal(){ $('#genericModal').style.display='none'; $('#genericModal').setAttribute('aria-hidden','true'); }
  window.closeGenericModal = closeGenericModal;

</script>
</body>
</html>
